<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MedLgerr — Trading Cockpit</title>
  <meta name="description" content="MedLgerr — Algorithmic trading portfolio" />
  <link rel="icon" href="data:,"><style>
  /* ---------- Base & theme ---------- */
  :root{--bg:#0b0f14;--panel:#0f1720;--accent:#00e6c3;--accent2:#5b7df7;--muted:#93a1b2}
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; background: radial-gradient(ellipse at 20% 10%, rgba(91,125,247,0.04), transparent 15%), radial-gradient(ellipse at 80% 90%, rgba(0,230,195,0.03), transparent 12%), var(--bg); color:#cbd5e1}
  a{color:var(--accent)}
  .container{max-width:1100px;margin:40px auto;padding:24px}
  header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent2),var(--accent));display:flex;align-items:center;justify-content:center;font-weight:700;color:#041024;font-size:20px;box-shadow:0 6px 30px rgba(91,125,247,0.08);}
  h1{margin:0;font-size:20px}
  .subtitle{color:var(--muted);font-size:13px}

  /* ---------- Layout ---------- */
  .grid{display:grid;grid-template-columns: 380px 1fr 320px;gap:18px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:16px;box-shadow:0 6px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
  .left, .center, .right{min-height:500px}

  /* ---------- Left: Strategies list ---------- */
  .strategies{display:flex;flex-direction:column;gap:12px}
  .strategy{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;cursor:pointer;background:transparent;border:1px solid rgba(255,255,255,0.02);transition:all .22s}
  .strategy:hover{transform:translateY(-4px);box-shadow:0 10px 30px rgba(0,0,0,0.6);border-color:rgba(91,125,247,0.12)}
  .strategy .icon{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,var(--accent2),#182033);display:flex;align-items:center;justify-content:center;font-weight:700;color:white}
  .strategy h4{margin:0;font-size:14px}
  .strategy p{margin:0;color:var(--muted);font-size:12px}

  /* ---------- Center: 3D canvas + stats ---------- */
  #canvas-wrap{height:420px;border-radius:12px;overflow:hidden;position:relative}
  #threejs-canvas{display:block;width:100%;height:100%}
  .overlay-stats{position:absolute;left:18px;bottom:18px;background:rgba(2,6,23,0.6);backdrop-filter:blur(6px);padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
  .metrics{display:flex;gap:12px}
  .metric{min-width:110px}
  .metric h3{margin:0;font-size:16px}
  .metric p{margin:0;color:var(--muted);font-size:12px}

  /* ---------- Right: Dashboard widgets ---------- */
  .widget{margin-bottom:12px}
  .widget h3{margin:0 0 8px 0}
  .eq-curve{
    width: 100% !important;
    height: 180px !important;
    max-width: 100%;
    max-height: 180px;
    display: block;
    overflow: hidden;
  }
  .eq-curve canvas {
    width: 100% !important;
    height: 180px !important;
    display: block;
  }
  .stat-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
  .stat{background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:8px;border-radius:8px}
  .stat strong{display:block;font-size:18px}

  /* ---------- Modals & interactions ---------- */
  .panel{position:fixed;right:20px;top:80px;width:420px;max-height:78vh;overflow:auto;padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(7,10,15,0.96), rgba(7,10,15,0.94));border:1px solid rgba(255,255,255,0.03);box-shadow:0 20px 60px rgba(2,6,23,0.7);transform:translateX(12px);transition:transform .28s,opacity .28s;opacity:0}
  .panel.open{transform:translateX(0);opacity:1}
  .close-btn{background:transparent;border:0;color:var(--muted);cursor:pointer}

  /* ---------- Footer ---------- */
  footer{margin-top:20px;text-align:center;color:var(--muted);font-size:13px}

  /* small screens */
  @media (max-width:1000px){.grid{grid-template-columns:1fr;}.right{order:3}.left{order:2}.center{order:1}.container{padding:12px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">MG</div>
        <div>
          <h1>MedLgerr — Trading Cockpit</h1>
          <div class="subtitle">Algorithmic trading portfolio — hedging, arbitrage, HFT</div>
        </div>
      </div>
      <div>
        <small class="subtitle">Static site • Manual updates • Hosted on GitHub Pages</small>
      </div>
    </header>

    <div class="grid">
      <div class="left card">
        <h3>Strategies</h3>
        <div class="strategies" id="strategies">
          <!-- Strategy items injected by JS -->
        </div>
      </div>

      <div class="center card">
        <div id="canvas-wrap">
          <canvas id="threejs-canvas"></canvas>
          <div class="overlay-stats">
            <div class="metrics">
              <div class="metric"><h3 id="liveProfit">₹ 0</h3><p>Net P&L</p></div>
              <div class="metric"><h3 id="sharpe">0.00</h3><p>Sharpe</p></div>
              <div class="metric"><h3 id="maxdd">0.0%</h3><p>Max Drawdown</p></div>
            </div>
          </div>
        </div>

        <div style="margin-top:14px;display:flex;gap:12px;align-items:center">
          <button id="togglePanel" class="card" style="cursor:pointer;">Open Strategy Panel</button>
          <div style="color:var(--muted);font-size:13px">Tip: click a strategy left to load its data</div>
        </div>
      </div>

      <div class="right card">
        <div class="widget">
          <h3>Equity Curve</h3>
          <canvas id="equityChart" class="eq-curve"></canvas>
        </div>
        <div class="widget">
          <h3>Performance</h3>
          <div class="stat-grid">
            <div class="stat"><strong id="cagr">0.0%</strong><small>CAGR</small></div>
            <div class="stat"><strong id="winrate">0%</strong><small>Win Rate</small></div>
            <div class="stat"><strong id="pf">0.00</strong><small>Profit Factor</small></div>
            <div class="stat"><strong id="trades">0</strong><small>Total Trades</small></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.149.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    // Equity chart setup
    const equityCanvas = document.getElementById('equityChart');
    const equityCtx = equityCanvas.getContext('2d');

    const equityChart = new Chart(equityCtx, {
      type: 'line',
      data: {
        labels: [], // timestamps or indexes
        datasets: [{
          label: 'Equity',
          data: [],
          borderColor: 'rgba(0, 230, 195, 1)',
          backgroundColor: 'rgba(0, 230, 195, 0.2)',
          fill: true,
          tension: 0.2,
          pointRadius: 0,
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: { display: false },
          y: {
            ticks: { color: '#88d8cc' },
            grid: { color: 'rgba(255, 255, 255, 0.05)' },
          }
        },
        plugins: {
          legend: { display: false }
        },
        animation: false,
      }
    });

    // Dummy data injection example to test height
    function generateDummyEquityData() {
      const data = [];
      const labels = [];
      for (let i = 0; i < 100; i++) {
        labels.push(i);
        data.push(Math.sin(i / 10) * 10 + 50);
      }
      equityChart.data.labels = labels;
      equityChart.data.datasets[0].data = data;
      equityChart.update();
    }
    generateDummyEquityData();
  </script>
</body>
</html>
